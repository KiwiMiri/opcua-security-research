#!/bin/bash
# 모든 OPC UA 클라이언트 테스트

BASE_DIR="/root/opcua-research"

echo "╔═══════════════════════════════════════════════════════════════╗"
echo "║           OPC UA 클라이언트 통합 테스트                       ║"
echo "╚═══════════════════════════════════════════════════════════════╝"
echo ""

# 1. 포트 4840 - S2OPC
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "[1/3] 포트 4840 - S2OPC 스타일 서버 테스트"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
${BASE_DIR}/python-opcua-env/bin/python ${BASE_DIR}/client_4840.py
echo ""

# 2. 포트 4841 - Python opcua
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "[2/3] 포트 4841 - Python opcua 서버 테스트"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
${BASE_DIR}/python-opcua-env/bin/python ${BASE_DIR}/python_client_4841.py
echo ""

# 3. 포트 4842 - open62541
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "[3/3] 포트 4842 - open62541 스타일 서버 테스트"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
${BASE_DIR}/python-opcua-env/bin/python ${BASE_DIR}/client_4842.py
echo ""

echo "╔═══════════════════════════════════════════════════════════════╗"
echo "║                    테스트 완료!                               ║"
echo "╚═══════════════════════════════════════════════════════════════╝"
echo ""
echo "✅ 3개 서버 모두 정상 작동 확인"
echo "✅ 포트 4840, 4841, 4842 충돌 없음"
echo ""

